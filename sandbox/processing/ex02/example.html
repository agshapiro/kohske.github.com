<!DOCTYPE html>
<html>
  <head>
    <title>Processing.js Example Page</title>
    <meta charset="UTF-8">
    <script type="text/javascript" src="processing-1.4.1.js"></script>
    <script type="text/processing" data-processing-target="targetcanvas">
int fires[][] = {{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{1,0,0},{1,0,0},{1,0,0},{2,0,0},{2,0,0},{2,0,0},{2,0,0},{2,0,0},{3,0,0},{3,0,0},{3,0,0},{5,0,0},{5,0,0},{6,0,0},{6,0,0},{6,0,0},{7,0,0},{7,0,0},{7,0,0},{9,0,0},{9,0,0},{9,0,0},{11,0,0},{11,0,0},{11,0,0},{13,0,0},{13,0,0},{15,0,0},{15,0,0},{15,0,0},{17,0,0},{17,0,0},{17,0,0},{19,0,0},{19,0,0},{21,0,0},{21,0,0},{21,0,0},{24,0,0},{24,0,0},{24,0,0},{26,0,0},{26,0,0},{29,0,0},{29,0,0},{32,0,0},{32,0,0},{34,0,0},{34,0,0},{34,0,0},{38,0,0},{38,0,0},{38,0,0},{41,0,0},{41,0,0},{44,0,0},{44,0,0},{47,0,0},{47,0,0},{47,0,0},{51,0,0},{51,0,0},{51,0,0},{54,0,0},{54,0,0},{58,0,0},{58,0,0},{58,0,0},{62,1,0},{62,1,0},{62,1,0},{66,1,0},{66,1,0},{71,2,0},{71,2,0},{75,2,0},{75,2,0},{80,2,0},{80,2,0},{84,2,0},{84,2,0},{89,2,0},{89,3,0},{89,3,0},{93,3,0},{93,3,0},{93,5,0},{98,5,0},{98,5,0},{103,6,0},{103,6,0},{108,7,0},{108,7,0},{113,7,0},{113,9,0},{118,9,0},{118,9,0},{118,11,0},{123,11,0},{123,13,0},{123,13,0},{129,15,0},{129,15,0},{134,17,0},{134,17,0},{140,19,0},{140,19,0},{146,21,0},{146,21,0},{146,24,0},{152,24,0},{152,26,0},{152,26,0},{158,29,0},{158,29,0},{164,32,1},{164,34,1},{170,34,1},{170,38,1},{170,41,1},{176,44,2},{176,44,2},{176,47,2},{184,51,2},{184,54,2},{191,58,2},{191,58,2},{197,62,2},{197,66,3},{204,71,3},{204,75,3},{204,80,3},{211,84,5},{211,84,5},{211,89,5},{218,93,5},{218,98,6},{225,103,6},{225,108,6},{232,113,6},{232,118,7},{232,123,7},{240,129,7},{240,134,9},{240,140,9},{247,146,9},{247,152,11},{247,158,11},{247,170,11},{247,176,13},{247,184,13},{255,191,15},{255,197,15},{255,204,17},{255,211,17},{255,218,19},{255,225,19},{255,232,21},{255,240,21},{255,247,24},{255,247,29},{255,247,32},{255,247,34},{255,247,38},{255,247,44},{255,255,47},{255,255,51},{255,255,58},{255,255,62},{255,255,71},{255,255,75},{255,255,80},{255,255,89},{255,255,93},{255,255,103},{255,255,108},{255,255,113},{255,255,123},{255,255,129},{255,255,140},{255,255,146},{255,255,152},{255,255,164},{255,255,170},{255,255,184},{255,255,191},{255,255,197},{255,255,211},{255,255,218},{255,255,225},{255,255,232},{255,255,240},{255,255,247},{255,255,247},{255,255,247},{255,255,247},{255,255,247},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255}};

int [][] coltable;

void setup() {

  size(100, 60, P3D);

  coltable = new int[width][height];
  for (int x = 0; x < width; ++x) {
    for (int y = 0; y < height; ++y) {
      coltable[x][y] = 128;
    }
  }
}

void draw() {

  background(#FFFFFF);
  int light_count = 90;
  int dark_count = 40;
  int x, y;
  color col;
  for (int i=0; i < light_count; ++i) {
    x = int(random(0, width));
    y = int(random(height-30, height));
    coltable[x][y] = 255; // 0xFFFFFFFF;
  }

  for (int i=0; i < dark_count;i++) {
    x = int(random(0, width));
    y = int(random(0, 5));

    col = coltable[x][y];
    col = (col >> 1);
    coltable[x][y] = col;
  }

  for (y = height-1; y >= 0; --y) {
    for (x = 0; x < width; ++x) {
      col=0;
      if (x > 0) col += coltable[x-1][y];
      col += coltable[x][y];
      if (x < width-1) col += coltable[x+1][y];
      if (y > 0) col += coltable[x][y-1];
      col>>=2;
      coltable[x][y] = col;
    }
  }

  beginShape(POINTS);
  for (y = 0; y < height; ++y) {
    for (x = 0; x < width; ++x) {
      stroke(fires[coltable[x][y]][0], fires[coltable[x][y]][1], fires[coltable[x][y]][2]);
      vertex(x, y);
    }
  }
  endShape();
}
    </script>
  </head>

  <body>
    <canvas id="targetcanvas" style="border: 1px solid black;"></canvas>
  </body>
</html>
